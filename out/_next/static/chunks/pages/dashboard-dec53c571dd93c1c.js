(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(1949)}])},1949:function(e,n,t){"use strict";t.r(n),t.d(n,{RECEIPTS_ENUM:function(){return he},default:function(){return Ze}});var r=t(7568),a=t(4924),i=t(7582),o=t(5893),s=t(7294),c=t(9008),l=t.n(c),u=t(1163),d=t(8456),f=t(7948),h=t(6798),p=t(1737),x=t(6447),Z=t(5861),m=t(4674),g=t(1519),j=t(2492),v=t(9581),_=t(1425),y=t(3321),b=t(6540),w=t(7357),C=t(2293),N=t(155),E=t(2211),D=t(9899),S=t.n(D);function k(){var e=(0,E.aC)(),n=e.authUser,t=e.signOut;return(0,o.jsx)(w.Z,{sx:{flexGrow:1},children:(0,o.jsx)(C.Z,{position:"static",className:S().appbar,children:(0,o.jsx)(N.Z,{className:S().toolbar,children:(0,o.jsxs)(f.Z,{className:S().container,children:[(0,o.jsx)(Z.Z,{variant:"h3",sx:{flexGrow:1,alignSelf:"center"},children:"EXPENSE TRACKER PRO"}),(0,o.jsxs)(x.Z,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[(0,o.jsx)(Z.Z,{variant:"h6",sx:{flexGrow:1},children:null===n||void 0===n?void 0:n.email}),(0,o.jsx)(y.Z,{variant:"text",color:"secondary",onClick:t,children:"Logout"})]})]})})})})}var R=t(9661),T=t(1733),O=t(7957),I=t(2912),G=t(9249),P=t.n(G);function U(e){var n=e.receipt;return(0,o.jsx)("div",{children:(0,o.jsxs)(x.Z,{direction:"row",justifyContent:"space-between",sx:{margin:"1em 0"},children:[(0,o.jsxs)(x.Z,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[(0,o.jsx)(R.Z,{alt:"receipt image",src:n.imageUrl}),(0,o.jsxs)(x.Z,{direction:"row",className:P().contentRow,children:[(0,o.jsxs)(x.Z,{direction:"column",sx:{flexGrow:1},children:[(0,o.jsx)(Z.Z,{variant:"h3",children:(0,I.Z)(n.date,"MM/dd/yy")}),(0,o.jsxs)(Z.Z,{variant:"h4",children:["$",n.amount]})]}),(0,o.jsxs)(x.Z,{direction:"column",sx:{flexGrow:1},children:[(0,o.jsxs)(Z.Z,{variant:"h5",children:[n.locationName," (",n.address,")"]}),(0,o.jsx)(Z.Z,{variant:"h5",children:n.items})]})]})]}),(0,o.jsxs)(x.Z,{direction:"row",className:P().actions,children:[(0,o.jsx)(m.Z,{"aria-label":"edit",color:"secondary",onClick:e.onEdit,children:(0,o.jsx)(O.Z,{})}),(0,o.jsx)(m.Z,{"aria-label":"delete",color:"secondary",onClick:e.onDelete,children:(0,o.jsx)(T.Z,{})})]})]})})}var B=t(6042),H=t(9396),X=t(3741),M=t(9669),J=t(4596),L=t(720),z=t(6100),A=t(5731),K=t(6650),V="gs://expense-tracker-pro-378bb.appspot.com";function q(e,n){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)((function(e,n){var t,r,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=(0,I.Z)(new Date,"yyyy-MM-dd'T'HH:mm:ss'z'"),r="".concat(V,"/").concat(n,"/").concat(t,".jpg"),a=(0,K.iH)(A.tO,r),[4,(0,K.KV)(a,e)];case 1:return i.sent(),[2,r]}}))}))).apply(this,arguments)}function W(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,K.Jt)((0,K.iH)(A.tO,e))];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function $(e,n){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)((function(e,n){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,K.KV)((0,K.iH)(A.tO,n),e)];case 1:return t.sent(),[2]}}))}))).apply(this,arguments)}var ee="receipts";function ne(e,n,t,r,a,i,o){(0,z.ET)((0,z.hJ)(A.db,ee),{uid:e,date:n,locationName:t,address:r,items:a,amount:i,imageBucket:o})}function te(e,n,t){return re.apply(this,arguments)}function re(){return re=(0,r.Z)((function(e,n,t){var a,o;return(0,i.__generator)(this,(function(s){return a=(0,z.IO)((0,z.hJ)(A.db,ee),(0,z.ar)("uid","==",e),(0,z.Xo)("date","desc")),o=(0,z.cf)(a,function(){var e=(0,r.Z)((function(e){var r,a,o,s,c,l,u,d,f,h,p,x;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=[],a=!0,o=!1,s=void 0,i.label=1;case 1:i.trys.push([1,7,8,9]),c=e.docs[Symbol.iterator](),i.label=2;case 2:return(a=(l=c.next()).done)?[3,6]:(u=l.value,d=u.data(),f=r.push,h=[(0,B.Z)({},d)],p={date:d.date.toDate(),id:u.id},[4,W(d.imageBucket)]);case 3:return[4,f.apply(r,[H.Z.apply(void 0,h.concat((p.imageUrl=i.sent(),p)))])];case 4:i.sent(),i.label=5;case 5:return a=!0,[3,2];case 6:return[3,9];case 7:return x=i.sent(),o=!0,s=x,[3,9];case 8:try{a||null==c.return||c.return()}finally{if(o)throw s}return[7];case 9:return n(r),t(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}()),[2,o]}))})),re.apply(this,arguments)}var ae=t(3558),ie=t.n(ae),oe="No file selected",se={fileName:oe,file:null,date:null,locationName:"",address:"",items:"",amount:""};function ce(e){var n=Object.keys(e.edit).length>0,t=(0,s.useState)(n?e.edit:se),c=t[0],l=t[1],u=(0,s.useState)(!1),d=u[0],f=u[1],h=(0,E.aC)().authUser;(0,s.useEffect)((function(){e.showDialog&&l(n?e.edit:se)}),[e.edit,e.showDialog]);var p=function(e,n){l((function(t){return(0,H.Z)((0,B.Z)({},t),(0,a.Z)({},n,e.target.value))}))},m=function(){f(!1),e.onCloseDialog()},g=function(){var t=(0,r.Z)((function(){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:f(!0),r.label=1;case 1:return r.trys.push([1,9,,10]),n?c.fileName?[4,$(c.file,c.imageBucket)]:[3,3]:[3,5];case 2:r.sent(),r.label=3;case 3:return[4,(a=c.id,i=h.uid,o=c.date,s=c.locationName,l=c.address,u=c.items,d=c.amount,p=c.imageBucket,void(0,z.pl)((0,z.JU)(A.db,ee,a),{uid:i,date:o,locationName:s,address:l,items:u,amount:d,imageBucket:p}))];case 4:return r.sent(),[3,8];case 5:return[4,q(c.file,h.uid)];case 6:return t=r.sent(),[4,ne(h.uid,c.date,c.locationName,c.address,c.items,c.amount,t)];case 7:r.sent(),r.label=8;case 8:return e.onSuccess(n?he.edit:he.add),[3,10];case 9:return r.sent(),e.onError(n?he.edit:he.add),[3,10];case 10:return m(),[2]}var a,i,o,s,l,u,d,p}))}));return function(){return t.apply(this,arguments)}}();return(0,o.jsxs)(j.Z,{classes:{paper:ie().dialog},onClose:function(){return m()},open:e.showDialog,component:"form",children:[(0,o.jsxs)(Z.Z,{variant:"h4",className:ie().title,children:[n?"EDIT":"ADD"," EXPENSE"]}),(0,o.jsxs)(v.Z,{className:ie().fields,children:[(0,o.jsxs)(x.Z,{direction:"row",spacing:2,className:ie().receiptImage,children:[n&&!c.fileName&&(0,o.jsx)(R.Z,{alt:"receipt image",src:c.imageUrl,sx:{marginRight:"1em"}}),(0,o.jsxs)(y.Z,{variant:"outlined",component:"label",color:"secondary",children:["Upload Receipt",(0,o.jsx)("input",{type:"file",hidden:!0,onInput:function(e){!function(e){var n=e.files[0];l((function(e){return(0,H.Z)((0,B.Z)({},e),{fileName:n.name})})),l((function(e){return(0,H.Z)((0,B.Z)({},e),{file:n})}))}(e.target)}})]}),(0,o.jsx)(Z.Z,{children:c.fileName})]}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(L._,{dateAdapter:M.Z,children:(0,o.jsx)(J.M,{label:"Date",value:c.date,onChange:function(e){l((function(n){return(0,H.Z)((0,B.Z)({},n),{date:e})}))},maxDate:new Date,renderInput:function(e){return(0,o.jsx)(X.Z,(0,B.Z)({color:"tertiary"},e))}})})}),(0,o.jsx)(X.Z,{color:"tertiary",label:"Location name",variant:"standard",value:c.locationName,onChange:function(e){return p(e,"locationName")}}),(0,o.jsx)(X.Z,{color:"tertiary",label:"Location address",variant:"standard",value:c.address,onChange:function(e){return p(e,"address")}}),(0,o.jsx)(X.Z,{color:"tertiary",label:"Items",variant:"standard",value:c.items,onChange:function(e){return p(e,"items")}}),(0,o.jsx)(X.Z,{color:"tertiary",label:"Amount",variant:"standard",value:c.amount,onChange:function(e){return p(e,"amount")}})]}),(0,o.jsx)(_.Z,{children:d?(0,o.jsx)(y.Z,{color:"secondary",variant:"contained",disabled:!0,children:"Submitting..."}):(0,o.jsx)(y.Z,{color:"secondary",variant:"contained",disabled:c.fileName===oe||!c.date||0===c.locationName.length||0===c.address.length||0===c.items.length||0===c.amount.length,onClick:g,children:"Submit"})})]})}var le,ue,de=t(4709),fe=t.n(de),he=Object.freeze({none:0,add:1,edit:2,delete:3}),pe=(le={},(0,a.Z)(le,he.add,"Receipt was successfully added!"),(0,a.Z)(le,he.edit,"Receipt was successfully updated!"),(0,a.Z)(le,he.delete,"Receipt successfully deleted!"),le),xe=(ue={},(0,a.Z)(ue,he.add,"Receipt was not successfully added!"),(0,a.Z)(ue,he.edit,"Receipt was not successfully updated!"),(0,a.Z)(ue,he.delete,"Receipt not successfully deleted!"),ue);function Ze(){var e=(0,E.aC)(),n=e.authUser,t=e.isLoading,a=(0,u.useRouter)(),c=(0,s.useState)(he.none),w=c[0],C=c[1],N=(0,s.useState)(!0),D=(N[0],N[1]),S=(0,s.useState)(""),R=S[0],T=S[1],O=(0,s.useState)(""),I=O[0],G=O[1],P=(0,s.useState)([]),B=P[0],H=P[1],X=(0,s.useState)({}),M=X[0],J=X[1],L=(0,s.useState)(""),V=L[0],q=L[1],F=(0,s.useState)(!1),W=F[0],Y=F[1],$=(0,s.useState)(!1),Q=$[0],ne=$[1],re=function(){var e=(0,r.Z)((function(e,n){return(0,i.__generator)(this,(function(t){return q(n?pe[e]:xe[e]),n?Y(!0):ne(!0),C(he.none),[2]}))}));return function(n,t){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){t||n||a.push("/")}),[n,t]),(0,s.useEffect)((0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return n?[4,te(n.uid,H,D)]:[3,2];case 1:return e=t.sent(),[2,function(){return e()}];case 2:return[2]}}))})),[n]);var ae=function(){C(he.none),T("")},ie=function(){var e=(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:e=!0,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,(r=R,void(0,z.oe)((0,z.JU)(A.db,ee,r)))];case 2:return n.sent(),[4,(t=I,void(0,K.oq)((0,K.iH)(A.tO,t)))];case 3:return n.sent(),[3,5];case 4:return n.sent(),e=!1,[3,5];case 5:return ae(),re(he.delete,e),[2]}var t,r}))}));return function(){return e.apply(this,arguments)}}();return n?(0,o.jsxs)("div",{children:[(0,o.jsx)(l(),{children:(0,o.jsx)("title",{children:"Expense Tracker Pro"})}),(0,o.jsx)(k,{}),(0,o.jsxs)(f.Z,{children:[(0,o.jsx)(h.Z,{open:W,autoHideDuration:1500,onClose:function(){return Y(!1)},anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,o.jsx)(p.Z,{onClose:function(){return Y(!1)},severity:"success",children:V})}),(0,o.jsx)(h.Z,{open:Q,autoHideDuration:1500,onClose:function(){return ne(!1)},anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,o.jsx)(p.Z,{onClose:function(){return ne(!1)},severity:"error",children:V})}),(0,o.jsxs)(x.Z,{direction:"row",sx:{paddingTop:"1.5em"},children:[(0,o.jsx)(Z.Z,{variant:"h4",sx:{lineHeight:2,paddingRight:"0.5em"},children:"EXPENSES"}),(0,o.jsx)(m.Z,{"aria-label":"edit",color:"secondary",onClick:function(){C(he.add),J({})},className:fe().addButton,children:(0,o.jsx)(b.Z,{})})]}),B.map((function(e){return(0,o.jsxs)("div",{children:[(0,o.jsx)(g.Z,{light:!0}),(0,o.jsx)(U,{receipt:e,onEdit:function(){return function(e){C(he.edit),J(e)}(e)},onDelete:function(){return n=e.id,t=e.imageBucket,C(he.delete),T(n),void G(t);var n,t}})]},e.id)}))]}),(0,o.jsx)(ce,{edit:M,showDialog:w===he.add||w===he.edit,onError:function(e){return re(e,!1)},onSuccess:function(e){return re(e,!0)},onCloseDialog:function(){return C(he.none)}}),(0,o.jsxs)(j.Z,{open:w===he.delete,onClose:ae,children:[(0,o.jsx)(Z.Z,{variant:"h4",className:fe().title,children:"DELETE EXPENSE"}),(0,o.jsx)(v.Z,{children:(0,o.jsx)(p.Z,{severity:"error",children:"This will permanently delete your receipt!"})}),(0,o.jsxs)(_.Z,{sx:{padding:"0 24px 24px"},children:[(0,o.jsx)(y.Z,{color:"secondary",variant:"outlined",onClick:ae,children:"Cancel"}),(0,o.jsx)(y.Z,{color:"secondary",variant:"contained",autoFocus:!0,onClick:ie,children:"Delete"})]})]})]}):(0,o.jsx)(d.Z,{color:"inherit",sx:{marginLeft:"50%",marginTop:"25%"}})}},4709:function(e){e.exports={primaryColor:"#fafafa",secondaryColor:"#1a73e8",tertiaryColor:"#1b3a57",successColor:"#00bfa5",errorColor:"#ff5252",fontColor:"#1b3a57",fontTitle:'"Google Sans Mono","Courier New",serif',fontDefault:'"Google Sans","Roboto",sans-serif',addButton:"dashboard_addButton__Tc34O",title:"dashboard_title__T9wDv"}},3558:function(e){e.exports={title:"expenseDialog_title__7JYks",fields:"expenseDialog_fields__jZXS6",dialog:"expenseDialog_dialog__DZRxJ",receiptImage:"expenseDialog_receiptImage__OWS9N"}},9899:function(e){e.exports={primaryColor:"#fafafa",secondaryColor:"#1a73e8",tertiaryColor:"#1b3a57",successColor:"#00bfa5",errorColor:"#ff5252",fontColor:"#1b3a57",fontTitle:'"Google Sans Mono","Courier New",serif',fontDefault:'"Google Sans","Roboto",sans-serif',container:"navbar_container__VP3XG",toolbar:"navbar_toolbar__nCZks"}},9249:function(e){e.exports={contentRow:"receiptRow_contentRow__msDcs",actions:"receiptRow_actions__Lgfzn"}}},function(e){e.O(0,[589,56,774,888,179],(function(){return n=1075,e(e.s=n);var n}));var n=e.O();_N_E=n}]);